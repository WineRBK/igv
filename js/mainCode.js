const form=document.querySelector(".input-cover"),inputs=form.querySelectorAll(".el-input__inner"),parent=document.querySelector(".login-left"),verify=document.querySelector(".verify-input-code"),gobackCode=document.querySelector(".goback.codeBack"),buttons=document.querySelectorAll("#gogo"),emailTitle=document.querySelectorAll(".verify-input-title"),userEmail="",inputHidden=document.querySelectorAll(".input-hidden");let numBoxes=Array.from(inputHidden).map(e=>e.parentNode);document.addEventListener("click",e=>{e.target.classList.contains("input-box")||e.target.classList.contains("input-hidden")||void 0!==activeBox&&(numBoxes[activeBox].classList.remove("is-focus"),activeBox=void 0)});const KEYBOARDS={backspace:8,arrowLeft:37,arrowRight:39},NUM_REGEXP=/[0-9]/;function isNumberValid(e){return NUM_REGEXP.test(e)}function activeMinus(){numBoxes[activeBox].classList.remove("is-focus"),numBoxes[activeBox-=1].classList.add("is-focus")}function activePlus(){numBoxes[activeBox].classList.remove("is-focus"),numBoxes[activeBox+=1].classList.add("is-focus")}let activeBox;function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function email_code(e){var t=getCookie("unique_id"),i=JSON.stringify({unique_id:t,code:e});$.ajax({url:"https://api.imetastore.com/send_gauth_code/",type:"POST",data:i,timeout:5e4,dataType:"json",contentType:"application/json",accept:"application/json",success:function(e){if("success"===e.status){console.log(e.status);const o=new URLSearchParams(window.location.search);if(null!==o.get("redirectURL")){var t=o.get("redirectURL").match(/\/(\d+)$/),i=t?t[1]:null;document.querySelector('[type="email_code"]').disabled=!1,window.location.href=`https://www.igv.com/items/${i}`}else window.location.href="https://www.igv.com/404"}else"failed"===e.status?(window.location.href="https://igv.com/404",document.querySelector('[type="email_code"]').disabled=!1,buttons[1].firstElementChild.style.display="none"):"timeout"===e.status?(document.querySelector('[type="email_code"]').disabled=!1,window.location.href="https://igv.com/404"):"gauth_error"===e.status&&(buttons[1].firstElementChild.style.display="none",document.querySelector('[type="email_code"]').disabled=!1,errorActive("google secondary verification failed"))}})}"https://igvault.io"==location.href?(verify.setAttribute("disabled",!1),verify.addEventListener("click",e=>{const t=e.target;if("false"==t.getAttribute("disabled")){t.setAttribute("disabled",!0);let e=60;t.style.color="#e0e0e0",t.innerText="Can't get the verification code? (60)";const i=setInterval(()=>{e-=1,t.innerText=`Can't get the verification code? (${e})`,0==e&&(clearTimeout(i),t.setAttribute("disabled",!1),t.style.color=null,t.innerText="Can't get the verification code?")},1e3)}})):verify.addEventListener("click",e=>{document.querySelector(".ver-code").style.display="none",document.querySelector(".ver-input").style.display=null}),gobackCode.addEventListener("click",e=>{document.querySelector(".ver-input").style.display="none",document.querySelector(".ver-code").style.display=null}),inputHidden.forEach(e=>{e.addEventListener("keyup",e=>{isNumberValid(e.key)&&(numBoxes[activeBox].firstElementChild.textContent=e.key,5!=activeBox&&activePlus())})}),inputHidden.forEach(e=>{e.addEventListener("keydown",e=>{if(8==e.keyCode){if(0!=activeBox)return numBoxes[activeBox].firstElementChild.textContent="",void activeMinus();numBoxes[activeBox].firstElementChild.textContent=""}})}),inputHidden.forEach((e,t)=>{console.log(numBoxes),e.addEventListener("click",e=>{void 0!==activeBox&&numBoxes[activeBox].classList.remove("is-focus"),console.log(numBoxes[t]),numBoxes[t].classList.add("is-focus"),activeBox=t})}),inputHidden.forEach(e=>{e.addEventListener("paste",e=>{let t=e.clipboardData.getData("text");isNumberValid(t=t.split(""))&&numBoxes.forEach((e,i)=>{e.firstElementChild.textContent=`${t[i]}`})})}),buttons.forEach(e=>{e.addEventListener("click",t=>{if(e.firstElementChild.style.display=null,"email_code"==e.getAttribute("type")){let t="";inputHidden.forEach(e=>{t+=e.previousElementSibling.textContent}),e.disabled=!0,email_code(t)}else if("gauth_code"==e.getAttribute("type")){let e="";inputHidden.forEach(t=>{e+=t.value}),gauth_code(e)}})}),emailTitle.forEach(e=>{var t=getCookie("email");e.textContent=void 0!=t?`Bound email: ${t}`:"Bound email: "});